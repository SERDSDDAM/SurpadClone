

المرحلة صفر: بناء الأساس الجغرافي الإداري (مرحلة تأسيسية جديدة)
الهدف: إنشاء الهيكل الرقمي للتقسيمات الإدارية والجغرافية لليمن كطبقات أساسية في النظام.
المهمة 0.1: تصميم وتطوير قاعدة البيانات الجغرافية الإدارية
الوصف: تعديل مخطط قاعدة البيانات (Schema) ليشمل التسلسل الهرمي الجغرافي.
الإجراءات:
إنشاء جدول gis.governorates (المحافظات): يحتوي على (اسم المحافظة، الرمز، مضلع الحدود الجغرافية geom).
إنشاء جدول gis.districts (المديريات): يحتوي على (اسم المديرية، الرمز، governorate_id كمفتاح خارجي، مضلع الحدود geom).
إنشاء جدول gis.sub_districts (العزل): يحتوي على (اسم العزلة، district_id، مضلع الحدود geom).
إنشاء جدول gis.sectors (القطاعات): يحتوي على (اسم القطاع، sub_district_id، مضلع الحدود geom).
إنشاء جدول gis.neighborhood_units (وحدات الجوار): يحتوي على (اسم وحدة الجوار، sector_id، مضلع الحدود geom).
إنشاء جدول gis.blocks (البلوكات): يحتوي على (رقم البلوك، neighborhood_id، نوع الاستخدام، مضلع الحدود geom).
إنشاء جدول gis.streets (الشوارع): يحتوي على (اسم الشارع، النوع، العرض، geom كخط).
المهمة 0.2: إدخال البيانات الجغرافية الإدارية
الوصف: جمع ورقمنة الحدود الجغرافية للتقسيمات الإدارية.
الإجراءات:
الحصول على خرائط الحدود الإدارية من الجهات الرسمية (الهيئة العامة للمساحة، الجهاز المركزي للإحصاء).
رقمنة هذه الخرائط (Digitization) وتحويلها إلى طبقات GIS.
إدخال البيانات في الجداول التي تم إنشاؤها في المهمة 0.1.
المرحلة الأولى: تطوير أدوات رقمنة المخططات القديمة (مرحلة جديدة)
الهدف: بناء الأدوات التي تمكن الموظفين من تحويل المخططات الورقية والصور القديمة إلى بيانات رقمية ذكية.
المهمة 1.1: تطوير واجهة رقمنة المخططات (Digitization UI)
الوصف: بناء واجهة ويب متخصصة للموظفين الفنيين.
الإجراءات:
عارض الصور المرجعية جغرافيًا (Georeferenced Raster Viewer): تطوير مكون يمكنه عرض الصور بصيغ (TIFF, ECW, JP2) كخلفية على الخريطة التفاعلية.
أدوات الرسم والتحرير المتقدمة:
أداة رسم الخطوط (للشوارع) والمضلعات (للبلوكات).
أداة التعديل (Edit Vertices) لتصحيح الأشكال المرسومة.
أداة الالتصاق (Snapping) لضمان اتصال الشوارع والبلوكات بشكل صحيح.
نموذج إدخال البيانات المرافق للرسم: عند رسم شارع أو بلوك، يظهر نموذج لإدخال بياناته الوصفية (الاسم، النوع، العرض، إلخ).
المهمة 1.2: تطوير الواجهة الخلفية للمعالجة (Backend Processing)
الوصف: بناء المنطق البرمجي الذي يعالج البيانات المرسومة.
الإجراءات:
API لاستقبال البيانات المرسومة: إنشاء نقطة نهاية تستقبل الأشكال الهندسية (بصيغة GeoJSON) مع بياناتها الوصفية.
التحقق من الصحة الطوبولوجية (Topology Validation): يقوم الخادم تلقائياً بالتحقق من عدم وجود أخطاء في الرسم (مثل تقاطع الشوارع مع نفسها، أو وجود فجوات بين البلوكات المتجاورة).
حفظ البيانات في قاعدة البيانات: حفظ البيانات النظيفة في الجداول المخصصة لها (gis.streets, gis.blocks).
المرحلة الثانية: تطوير خدمة القرار المساحي الذكية (تطوير للخطة السابقة)
الهدف: دمج البيانات الجغرافية الجديدة في دورة عمل القرار المساحي لجعلها أكثر دقة وأتمتة.
المهمة 2.1: تحديث بوابة تقديم الطلبات
الوصف: جعل عملية تحديد الموقع أكثر ذكاءً.
الإجراءات:
عندما يحدد المواطن موقع أرضه على الخريطة، يقوم النظام تلقائياً بتحديد (المحافظة، المديرية، العزلة، وحدة الجوار، والبلوك) التي تقع فيها الأرض باستخدام تحليل Point-in-Polygon.
يقوم النظام بعرض هذه المعلومات للمواطن للتأكيد.
المهمة 2.2: تحديث تطبيق المساح الميداني
الوصف: تزويد المساح بسياق جغرافي كامل في الميدان.
الإجراءات:
عند استلام مهمة، يتم تحميل حدود (وحدة الجوار، البلوكات، والشوارع) المحيطة بموقع الطلب تلقائياً على خريطة التطبيق كطبقات مرجعية.
يستطيع المساح الآن رؤية موقعه بالنسبة للشوارع والبلوكات المرقمنة، مما يزيد من دقة عمله.
المهمة 2.3: تطوير نظام المراجعة الفنية الذكي (تطوير كبير)
الوصف: أتمتة عملية التحقق من الامتثال للمخططات.
الإجراءات:
المطابقة التلقائية: عند رفع المساح لبيانات قطعة الأرض، يقوم النظام تلقائياً بمقارنة حدودها مع:
حدود الشوارع المرقمنة من المخططات القديمة.
حدود البلوك الذي تقع فيه.
كشف التجاوزات: يقوم النظام بتظليل أي تجاوزات على الشوارع أو على أراضي الجيران وعرضها للمراجع الفني.
واجهة المقارنة بين المخطط والواقع: تعرض الواجهة للمراجع طبقتين: الوضع المخطط (من رقمنة المخططات القديمة) و الوضع القائم (من رفع المساح)، مما يسهل اتخاذ القرار.
حساب الارتدادات التلقائي: بناءً على عرض الشارع المرقمن، يقوم النظام بحساب وتوصية الارتداد القانوني المطلوب.



المرحلة الثالثة: المراجعة الفنية والاعتماد (4-6 أيام)
3.1 نظام المراجعة الفنية
 واجهة المراجع الفني.
 ✨ أدوات تحليل البيانات المساحية (GIS Tools):
واجهة المقارنة المرئية: عرض طبقتين على الخريطة: الأولى هي حدود الأرض كما رفعها المساح، والثانية هي حدودها حسب المخطط التنظيمي، مع تظليل أي تداخلات أو تجاوزات.
التحقق التلقائي: يقوم النظام تلقائياً بالتحقق من أن مساحة الأرض المرفوعة لا تتجاوز المساحة المسجلة في وثيقة الملكية بنسبة معينة.
 إضافة تعليقات وطلب تعديلات.
3.2 عملية الاعتماد
 مراجعة نهائية من المشرف.
 ✨ توليد القرار المساحي التلقائي (PDF Generation): عند الضغط على "اعتماد"، يقوم الخادم بجمع كل البيانات (الخرائط، جداول الإحداثيات، الاشتراطات) وتوليد ملف PDF رسمي.
 ✨ التوقيع الإلكتروني والختم الرقمي: دمج مكتبة لإضافة توقيع إلكتروني مشفر وختم زمني للقرار لضمان عدم التلاعب به.
 أرشفة تلقائية.
3.3 التصحيحات والتعديلات
 نظام إرجاع للتصحيح.
 تتبع التعديلات المطلوبة.
 إعادة الإرسال بعد التصحيح.
 ✨ سجل تدقيق كامل (Full Audit Trail): تسجيل كل تغيير يتم على الطلب في جدول audit_logs (من قام بالتغيير، متى، وما هو التغيير).



المرحلة الرابعة وما بعدها:
بقية المراحل التي وضعتها في خطتك السابقة (التكامل، لوحات التحكم، الأمان، النشر) تظل كما هي، ولكنها ستستفيد بشكل هائل من هذا الأساس الجغرافي القوي. على سبيل المثال:
لوحات التحكم: ستتمكن من عرض خرائط حرارية للمخالفات على مستوى الأحياء والبلوكات بدقة.
التكامل الحكومي: يمكن مشاركة طبقات الشوارع والبلوكات مع جهات أخرى (مثل الدفاع المدني، الكهرباء) بسهولة عبر خدمات الويب الجغرافية (WMS/WFS).


قط إضافة تفصيلية صغيرة للمرحلة السادسة:
6.1 الأمان المتقدم
 مراجعة شاملة للأمان.
 اختبار اختراق.
 ✨ تفعيل سياسة أمان المحتوى (CSP - Content Security Policy): لمنع هجمات XSS.
 ✨ حماية ضد هجمات CSRF: باستخدام التوكنات.
 تشفير البيانات الحساسة.
 نسخ احتياطية آمنة.
الخلاصة:
خطتك الأصلية كانت قوية جداً. التعديلات المقترحة تركز على تعميق الجانب التقني من خلال:
الأتمتة الجغرافية: الاستفادة القصوى من PostGIS لمعالجة البيانات بدلاً من الاعتماد على الإدخال اليدوي.
تحسين تدفق البيانات: ضمان أن البيانات تتدفق بسلاسة وأمان من الواجهة الأمامية إلى الخلفية، مع التحقق من صحتها في كل خطوة.
تعزيز الأمان: إضافة طبقات أمان إضافية على مستوى التطبيق والشبكة.
تجربة مستخدم أذكى: جعل الواجهات لا تعرض البيانات فقط، بل تتفاعل معها وتقدم اقتراحات ذكية للمستخدم.
بهذه الخطة المطورة، ستكون خدمة "القرار المساحي" لديك ليس فقط مكتملة وظيفياً، بل أيضاً متفوقة تقنياً.
